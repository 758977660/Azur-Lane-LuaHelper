slot0 = class("EscortInfo", import(".BaseVO"))

slot0.Ctor = function (slot0, slot1)
	slot0.id = slot1
	slot0.configId = slot0.id
end

slot0.update = function (slot0, slot1)
	slot0.awardTime = slot1.award_timestamp
	slot0.flushTime = slot1.flash_timestamp
	slot2 = {}

	if slot1.map then
		_.each(slot1.map, function (slot0)
			table.insert(slot0, {
				escortId = slot0.map_id,
				chapter = Chapter.New({
					id = slot0.chapter_id
				})
			})
		end)
	end

	slot0.chapters = slot2
end

slot0.bindConfigTable = function (slot0)
	return pg.escort_map_template
end

slot0.shouldFetch = function (slot0)
	return pg.TimeMgr.GetInstance().GetServerTime(slot1) - slot0.flushTime > 86400 or slot2 - slot0.awardTime > 86400
end

slot0.getEscort = function (slot0, slot1)
	return _.detect(slot0.chapters, function (slot0)
		return slot0.chapter.id == slot0
	end) and slot2.escortId
end

return slot0
