slot0 = class("AutoBotCommand", pm.SimpleCommand)

slot0.execute = function (slot0, slot1)
	slot3 = slot1:getBody().isActiveBot
	slot4 = slot1.getBody().toggle

	if getProxy(ChapterProxy) and slot5:getChapterById(AUTO_ENABLE_CHAPTER):isClear() then
		BattleScene.autoOpera = not slot3

		slot0.activeBotHelp(not slot3)
	elseif not slot3 then
		if slot4 then
			GetComponent(slot4, typeof(Toggle)).isOn = true
		end

		pg.TipsMgr.GetInstance():ShowTips(i18n("auto_battle_limit_tip"))
	end
end

slot0.activeBotHelp = function (slot0)
	slot1 = getProxy(PlayerProxy)

	if not slot0 then
		if slot0.autoBotHelp then
			pg.MsgboxMgr.GetInstance():hide()
		end

		return
	end

	if slot1.botHelp then
		return
	end

	slot0.autoBotHelp = true

	pg.MsgboxMgr.GetInstance():ShowHelpWindow({
		helps = i18n("help_battle_auto"),
		custom = {
			{
				text = "text_confirm",
				sound = SFX_CANCEL
			}
		},
		onClose = function ()
			slot0.autoBotHelp = false
		end
	})

	slot1.botHelp = true
end

return slot0
