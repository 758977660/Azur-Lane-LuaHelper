class("UpdateStoryCommand", pm.SimpleCommand).execute = function (slot0, slot1)
	slot3 = slot1:getBody().storyId

	if not pg.ConnectionMgr.GetInstance():getConnection() or not pg.ConnectionMgr.GetInstance():isConnected() then
		return
	end

	slot4 = 0

	if getProxy(PlayerProxy) and slot5:getData():getStoryIndexID(slot3) > 0 then
		slot6:addStory(slot4)
		slot5:updatePlayer(slot6)
	end

	if slot4 <= 0 then
		return
	end

	pg.ConnectionMgr.GetInstance():Send(11017, {
		story_id = slot4
	}, 11018, function (slot0)
		return
	end)
end

return class("UpdateStoryCommand", pm.SimpleCommand)
